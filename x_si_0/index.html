<html>
<head>
<title>X si O</title>
<link rel="stylesheet" type="text/css" href="style.css" /> 
<script language="javascript" type="text/javascript">

var edit=new Array(new Array(),new Array(),new Array())
var ok=1
var a,b
function init(){
   document.getElementById("pag").innerHTML=''
    for(var i=0;i<3;i++)
      for(var j=0;j<3;j++)
          edit[i][j]=1
      
      
}



function validare(){
     //daca e o linie
     var i;
     for(i=0;i<3;i++)
        {
          if((edit[i][0]==edit[i][1])&&(edit[i][1]==edit[i][2]))
              if(edit[i][0]==2)return 1
               else if(edit[i][0]==3)return -1
        }
     //daca e o coloana
     for(i=0;i<3;i++)
        if((edit[0][i]==edit[1][i])&&(edit[1][i]==edit[2][i]))
            if(edit[0][i]==2)return 1
              else if(edit[0][i]==3)return -1
     
     //daca e diagonala 1
     if((edit[0][0]==edit[1][1])&&(edit[1][1]==edit[2][2]))
            if(edit[0][0]==2)return 1
              else if(edit[0][0]==3)return -1
     //daca a doua diagonala    
     if((edit[0][2]==edit[1][1])&&(edit[1][1]==edit[2][0]))
            if(edit[0][2]==2)return 1
              else if(edit[0][2]==3)return -1

    
     return 0
    
}

function capacirea(x){
    //daca pot sa-mi umplu vreo linie
    var i;
    //var x=2;
    //if(c==3)x=3;
    for(i=0;i<3;i++){
      if((edit[i][0]==edit[i][1])&&(edit[i][0]==x)&&(edit[i][2]==1)){a=i; b=2; return 1;}
      if((edit[i][0]==edit[i][2])&&(edit[i][1]==1)&&(edit[i][0]==x)){a=i; b=1; return 1;}
      if((edit[i][0]==1)&&(edit[i][1]==edit[i][2])&&(edit[i][1]==x)){a=i; b=0; return 1;}
    }
    //daca pot sa-mi umplu vreo coloana
    for(i=0;i<3;i++){
      if((edit[0][i]==edit[1][i])&&(edit[0][i]==x)&&(edit[2][i]==1)){a=2; b=i; return 1;}
      if((edit[0][i]==edit[2][i])&&(edit[1][i]==1)&&(edit[0][i]==x)){a=1; b=i; return 1;}
      if((edit[0][i]==1)&&(edit[1][i]==edit[2][i])&&(edit[1][i]==x)){a=0; b=i; return 1;}
    }
    //daca pot sa capacesc diagonala 1
    if((edit[0][0]==edit[1][1])&&(edit[1][1]==x)&&(edit[2][2]==1)){a=2; b=2; return 1;}
    if((edit[0][0]==edit[2][2])&&(edit[1][1]==1)&&(edit[0][0]==x)){a=1; b=1; return 1;}
    if((edit[0][0]==1)&&(edit[1][1]==edit[2][2])&&(edit[1][1]==x)){a=0; b=0; return 1;}
    
    //daca pot sa capacesc diagonala 2
    if((edit[0][2]==edit[1][1])&&(edit[0][2]==x)&&(edit[2][0]==1)){a=2; b=0; return 1;}
    if((edit[0][2]==edit[2][0])&&(edit[1][1]==1)&&(edit[0][2])==x){a=1; b=1; return 1;}
    if((edit[0][2]==1)&&(edit[1][1]==edit[2][0])&&(edit[1][1]==x)){a=0; b=2; return 1;}
        
    return 0;
}

function pune_calc(){

   /*for(var i=0;i<3;i++)
      for(var j=0;j<3;j++)
         if(edit[i][j]==1)
            {scrie_calc(i,j)
             edit[i][j]=3
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!' 
                                ok=0
                                //dezact()
                                }
             return;
            }
    */
    //document.getElementById("pag").innerHTML='REMIZA' 
    if(capacirea(3)==1) {
             scrie_calc(a,b);
             edit[a][b]=3;
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                                ok=0;
                                }
             return;
     }
     
    if(capacirea(2)==1){
             scrie_calc(a,b);
             edit[a][b]=3;
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                                ok=0;
                                }
             return
     }
     //daca nu am putut sa capacesc nimic la mine si nici la el....
     //pun in centru
     if(edit[1][1]==1){
            scrie_calc(1,1);
            edit[1][1]=3;
            if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                               ok=0;
                                }
            return
     }
     //daca nu pot...pun intr-un colt
     if(edit[0][0]==1){
             scrie_calc(0,0);
             edit[0][0]=3;
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                                ok=0;
                                }
             return

     }
     if(edit[0][2]==1){
             scrie_calc(0,2);
             edit[0][2]=3;
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                                ok=0;
                                }
             return
     }

     if(edit[2][0]==1){
             scrie_calc(2,0);
             edit[2][0]=3;
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                                ok=0;
                                }
             return
     }
      
     if(edit[2][2]==1){
             scrie_calc(2,2);
             edit[2][2]=3;
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                                ok=0;
                                }
             return
     }
    //daca nu merge in colt, incerc pe lateral
     if(edit[0][1]==1){
             scrie_calc(0,1);
             edit[0][1]=3;
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                                ok=0;
                                }
             return
     }
     if(edit[1][1]==1){
             scrie_calc(1,0);
             edit[1][0]=3;
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                                ok=0;
                                }
             return
     }
     if(edit[1][2]==1){
             scrie_calc(1,2);
             edit[1][2]=3;
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                                ok=0;
                                }
             return
     }
     if(edit[2][1]==1){
             scrie_calc(2,0);
             edit[2][0]=3;
             if(validare()==-1){document.getElementById("pag").innerHTML='Ai pierdut!';
                                ok=0;
                                }
             return
     }
     document.getElementById("pag").innerHTML='Remiza!'
     
    }      


function scrie_calc(c1,c2){
   if(edit[c1][c2]==1)
    {document.getElementById("patrat"+c1+c2).style.color="#0000FF"
     document.getElementById("patrat"+c1+c2).innerHTML='O'
     edit[c1][c2]=3  
    }
}


function scrie(c1,c2){
   if(edit[c1][c2]==1&&ok==1)
    {document.getElementById("patrat"+c1+c2).style.color="#FF0000"
     document.getElementById("patrat"+c1+c2).innerHTML='X'
     edit[c1][c2]=2  
     if(validare()==0)pune_calc()
          else {document.getElementById("pag").innerHTML='Ai castigat!'
                 ok=0
                 //dezact()
                }
    }
}
</script>

</head>
<body onload="init()">


<table border="0px">
<tr>
<td><div class="patrat" id="patrat00" onClick="scrie(0,0)" onMouseOver="this.style.cursor='hand'"></div></td>
<td><div class="patrat" id="patrat01" onClick="scrie(0,1)" onMouseOver="this.style.cursor='hand'"></div></td>
<td><div class="patrat" id="patrat02" onClick="scrie(0,2)" onMouseOver="this.style.cursor='hand'"></div></td>
</tr>

<tr>
<td><div class="patrat" id="patrat10" onClick="scrie(1,0)" onMouseOver="this.style.cursor='hand'"></div></td>
<td><div class="patrat" id="patrat11" onClick="scrie(1,1)" onMouseOver="this.style.cursor='hand'"></div></td>
<td><div class="patrat" id="patrat12" onClick="scrie(1,2)" onMouseOver="this.style.cursor='hand'"></div></td>
</tr>

<tr>
<td><div class="patrat" id="patrat20" onClick="scrie(2,0)" onMouseOver="this.style.cursor='hand'"></div></td>
<td><div class="patrat" id="patrat21" onClick="scrie(2,1)" onMouseOver="this.style.cursor='hand'"></div></td>
<td><div class="patrat" id="patrat22" onClick="scrie(2,2)" onMouseOver="this.style.cursor='hand'"></div></td>
</tr>
</table>

<div id="pag">
Aici
</div>

</body>
</html>